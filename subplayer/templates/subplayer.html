 {% block content %}
{% load static %}

<!DOCTYPE html>

<html>

<head>

<meta charset="UTF-8">

  <!-- Fonts and icons -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
  <!-- Nucleo Icons -->
  <link href="{% static 'accounts/css/nucleo-icons.css' %}" rel="stylesheet">
  <link href="{% static 'accounts/css/nucleo-svg.css' %}" rel="stylesheet">
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>

  <!-- CSS Files -->
  <link id="pagestyle" href="{% static 'accounts/css/soft-ui-dashboard.css' %}" rel="stylesheet">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/svg+xml" href="{% static 'accounts/img/ele.png' %}">

<title>Chinese Log</title>

<style>

body {

margin: 0;

}

    .sidebar.collapsed + .media-content {
        margin-left: 0;
        width: 100%;
    }
    .subtitles-container span {
        display: inline-block;
        padding: 2px 5px;
    }

    #subtitles span {
        display: inline-block;
        padding: 2px 5px;
        color: #2f302f;
    }

    #subtitles span.highlight,
    #subtitles span.active-highlight,
    #subtitles span.perm-highlight {
        font-weight: bold;
        padding: 2px 4px;
        border-radius: 5px;
    }

    #subtitles span.highlight {
        color: #fff;
        background-color: yellow;
    }

    #subtitles span.active-highlight {
        background-color: #4285f4;
        color: #fff;
    }

    #subtitles span.perm-highlight {
        background-color: rgba(255, 255, 0, 0.5);
        color: #333;
        font-weight: bold;
    }


    .subplayer-page {
        background-color: #F9F8FA;
    }
    .button-group {
        position: relative;
        display: inline-flex;
        flex-direction: column;
        align-items: center;
    }
    .tooltip-text {
        visibility: hidden;
        width: 120px;
        background-color: black;
        color: white;
        text-align: center;
        border-radius: 6px;
        padding: 5px 0;
        position: absolute;
        z-index: 1;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        opacity: 0;
        transition: opacity 0.6s;
    }
    .button-group:hover .tooltip-text {
        visibility: visible;
        opacity: 1;
    }
    .button-group img {
        width: 40px;
        height: auto;
        cursor: pointer;
        margin-right: 10px;
    }
    .button-group img:last-child {
        margin-right: 0;
    }
    #highlighter-icon {
        filter: brightness(0) saturate(100%) invert(0%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(93%) contrast(88%);
        transition: filter 0.3s ease;
    }
    .play-all-button:hover {
        background-color: #0056b3;
    }

    .highlight-container a.active-highlight {
        background-color: #007BFF;
        color: #fff;
        font-weight: bold;
        border-left: 5px solid #007BFF;
    }

    @media (max-width: 768px) {


        .sidebar {
            position: fixed;
            top: 0;
            left: -200px;
            height: 100vh;
            width: 200px;
            transition: left 0.3s ease-in-out;
        }

        .sidebar.collapsed {
            left: 0;
        }

        .media-content {
            margin-left: 0;
            width: 100%;
        }

        .video-container {
            padding-bottom: 75%;
        }

        .subtitles-container {
            max-height: 150px;
        }

        .button-group img {
            width: 30px;
        }
    }

    .dictionary-button {
        background-color: #CCCCCC; /* Default inactive background color */
        color: #666666; /* Default inactive text color */
        border: 1px solid #007BFF; /* Border color */
        padding: 5px 10px; /* Narrower padding */
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease, color 0.3s ease;
        width: auto; /* Automatic width based on content */
        display: inline-block; /* Aligns with other inline elements */
        margin-top: 0; /* Ensures no extra margin on top */
    }

    .dictionary-button.active {
        background-color: #007BFF; /* Active background color */
        color: #FFFFFF; /* Active text color */
    }

    /* Bottom buttons container */
    .bottom-buttons {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px; /* Adjust spacing between elements */
        margin-bottom: 5px; /* Adjust bottom margin */
        padding-bottom: 10px; /* Add padding at the bottom */
    }

    .button-xp-container {
        display: flex;
        width: 100%;
        justify-content: center; /* Center the button */
        align-items: center; /* Center items vertically */
        gap: 10px; /* Adjust spacing between button and XP section if necessary */
    }

    .play-all-button {
        flex: 1; /* Take up full width */
        background-color: #007BFF;
        color: #fff;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        display: flex;
        justify-content: center;
        align-items: center; /* Center text vertically */
        height: 40px; /* Ensure same height as XP circle */
        margin-bottom: 0; /* Remove bottom margin */
    }

    .play-all-button:hover {
        background-color: #0056b3;
    }

    .xp-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px; /* Adjust spacing between circle and points if necessary */
    }

    .xp-circle {
        width: 40px; /* Adjust size */
        height: 40px; /* Adjust size */
        border-radius: 50%;
        background-color: #ffc40c;
        color: #ffffff;
        font-weight: bold;
        font-size: 14px; /* Adjust font size */
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .bottom-buttons-row {
        display: flex;
        justify-content: space-between; /* Space out the buttons evenly */
        align-items: center;
        padding: 0 20px; /* Add padding inside the container for side spacing */
        margin-left: 20px;
        gap: 15px; /* Adjust spacing between buttons */
        margin-bottom: 0; /* Move row closer to bottom of sidebar */
    }

    .bottom-buttons-row li {
        padding: 10px;
        flex: 1; /* Ensure all list items take equal space */
        display: flex;
        justify-content: center; /* Center the content within each list item */
    }

    .bottom-buttons-row li img,
    .bottom-buttons-row li .xp-circle {
        width: 32px; /* Adjust size of images and XP circle to fit four elements */
        height: 32px; /* Maintain aspect ratio */
    }

    .sidebar-toggle.outside-toggle {
        position: fixed;
        top: 20px;
        left: 200px; /* Original sidebar width */
        transition: left 0.3s ease-in-out;
    }

    .sidebar.collapsed + .sidebar-toggle.outside-toggle {
        left: 20px; /* Adjust left position when sidebar is collapsed */
    }
.buttons-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin: 20px auto;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    max-width: calc(178vh * 0.7);
}

.button-group {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.icon-button {
    width: 36px;
    height: 36px;
    padding: 8px;
    border-radius: 8px;
    background-color: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
    cursor: pointer;
}

.icon-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.tooltip-text {
    visibility: hidden;
    width: 140px;
    background-color: #333;
    color: white;
    text-align: center;
    border-radius: 6px;
    padding: 8px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s, visibility 0.3s;
    font-size: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.button-group:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

.dictionary-button {
    background-color: white;
    color: #333;
    border: 2px solid #e0e0e0;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.dictionary-button:hover {
    border-color: #007BFF;
    color: #007BFF;
    transform: translateY(-2px);
}

.dictionary-button.active {
    background-color: #007BFF;
    color: white;
    border-color: #007BFF;
}

/* Media queries for responsive design */
@media (max-width: 768px) {
    .buttons-container {
        padding: 10px;
        gap: 15px;
    }

    .icon-button {
        width: 32px;
        height: 32px;
        padding: 6px;
    }

    .dictionary-button {
        padding: 6px 12px;
        height: 32px;
        font-size: 14px;
    }
}
.sidebar {
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* Aligns content to the top */
    height: 100vh;
    position: fixed;
    right: 0; /* Changed from left: 0 to right: 0 */
    top: 0;
    overflow-y: auto;
    background-color: #FFFFFF; /* Sidebar background color */
    padding: 20px;
    padding-bottom: 10px;
    box-sizing: border-box;
    z-index: 1000; /* Ensure the sidebar is above other content */
    transition: transform 0.3s ease-in-out;
    width: 280px; /* Increased width */
}

.sidebar.collapsed {
    transform: translateX(100%); /* Changed from -100% to 100% */
}




/* Sidebar header */
.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.sidebar-header h3 {
    margin: 0;
}

/* Sidebar toggle button */
.sidebar-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sidebar-toggle .icon {
    width: 100%;
    height: 100%;
}

/* Highlight list container */
.highlight-list-container {
    flex-grow: 1;
    overflow-y: auto;
}

/* Highlight list styles */
#highlight-list {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

.highlight-item {
    margin-bottom: 10px;
}

.highlight-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #fff;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s ease, border-left-color 0.3s ease;
}

.highlight-container a {
    text-decoration: none;
    color: #333;
    flex-grow: 1;
    margin-right: 10px;
}

.highlight-container:hover {
    background-color: #f0f0f0;
}

.delete-highlight {
    width: 20px;
    height: 20px;
    cursor: pointer;
    visibility: hidden;
    transition: visibility 0.2s ease-in-out;
}

.highlight-container:hover .delete-highlight {
    visibility: visible;
}

.played-highlight {
    background-color: #e0f7fa; /* Active highlight background color */
    border-left: 5px solid #007BFF; /* Active highlight left border */
}

/* Bottom buttons container */
.bottom-buttons {
    margin-top: 20px;
    text-align: center; /* Center the buttons */
    padding-bottom: 10px; /* Add padding at the bottom */
}

/* Sidebar navigation styles */
.sidebar-nav ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
    display: flex;
    justify-content: space-between; /* Space out the buttons evenly */
    padding: 0 10px; /* Adjust padding for side spacing */
    gap: 10px; /* Adjust spacing between buttons */
}

.sidebar-nav li {
    display: flex;
    justify-content: center; /* Center the content within each list item */
}

.sidebar-nav a {
    display: block;
    width: 30px;
    height: 30px;
    position: relative;
}

.sidebar-nav img,
.sidebar-nav .xp-circle {
    width: 30px; /* Adjust size of images and XP circle to fit four elements */
    height: 30px; /* Maintain aspect ratio */
    object-fit: contain;
}

/* Tooltip styling */
.sidebar-nav a::after {
    content: attr(title); /* Use the title attribute as the tooltip content */
    position: absolute;
    bottom: 100%; /* Position above the icon */
    left: 50%; /* Center the tooltip */
    transform: translateX(-50%) translateY(-5px); /* Adjust horizontal position and add a little space above the icon */
    white-space: nowrap; /* Prevents the tooltip from wrapping */
    z-index: 999;
    background-color: black;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    opacity: 0; /* Initially hidden */
    visibility: hidden; /* Initially not visible */
    transition: opacity 0.3s, visibility 0.3s, transform 0.3s; /* Smooth transition for the tooltip appearance */
}

.sidebar-nav a:hover::after {
    opacity: 1; /* Show the tooltip */
    visibility: visible; /* Make it visible */
    transform: translateX(-50%) translateY(-10px); /* Adjust the position to move slightly above */
}


.sidebar {
    width: 180px; /* Adjust width as needed */
    height: 100vh;
    position: fixed;
    top: 0;
    overflow-y: auto;
    background-color: #FFFFFF;
    padding: 20px;
    box-sizing: border-box;
    z-index: 1000;
    transition: transform 0.3s ease-in-out;
}

.left-sidebar {
    left: 0;
    width: 140px; /* Reduced width for the left sidebar */
    transform: translateX(-100%);
}




/* Additional styles for the left sidebar if needed */
.left-sidebar .sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.left-sidebar .sidebar-header h3 {
    margin: 0;
}

.left-sidebar .sidebar-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.left-sidebar .sidebar-toggle .icon {
    width: 100%;
    height: 100%;
}
    @media (max-width: 768px) {


    .sidebar {
        position: fixed;
        top: 0;
        left: -280px; /* Hide the left sidebar by default on small screens */
        height: 100vh;
        width: 280px;
        transition: left 0.3s ease-in-out;
    }

    .sidebar.collapsed {
        left: 0;
    }

    .media-content {
        margin-left: 0;
        margin-right: 0;
        width: 100%;
    }

    .sidebar.collapsed ~ .media-content {
        margin-left: 0;
        margin-right: 0;
        width: 100%;
    }
}

.sidebar {
    width: 280px; /* Adjust width as needed */
    height: 100vh;
    position: fixed;
    top: 0;
    overflow-y: auto;
    background-color: #FFFFFF;
    padding: 20px;
    box-sizing: border-box;
    z-index: 1000;
    transition: transform 0.3s ease-in-out;
}

.left-sidebar {
    left: 0;
    width: 250px; /* Adjust width as needed */

    transform: translateX(-100%);
}







.left-sidebar.collapsed {
    transform: translateX(0);
}

iframe {
    height: 100%;
    width: 100%;
}
/* Update these CSS rules */
.left-sidebar {
    left: 0;
    width: 240px;
    transition: width 0.3s ease-in-out;
    transform: none !important; /* Remove the transform property */
}

.left-sidebar.collapsed {
    width: 40px;
    overflow: hidden;
}

/* Toggle button styles */
.left-sidebar-toggle {
    position: absolute;
    bottom: 20px;
    right: 10px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    background-color: #f3f4f6;
    transition: transform 0.3s ease-in-out;
    z-index: 1001;
}

.left-sidebar.collapsed .left-sidebar-toggle {
    transform: rotate(180deg);
}

/* Navigation items */
.nav-item {
    display: flex;
    align-items: center;
    padding: 10px;
    white-space: nowrap;
}

.nav-icon {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    margin-right: 12px;
}

.nav-text {
    transition: opacity 0.3s ease-in-out;
}

.left-sidebar.collapsed .nav-text {
    opacity: 0;
    width: 0;
    overflow: hidden;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .left-sidebar {
        transform: translateX(-100%);
        z-index: 1000;
    }

    .left-sidebar.collapsed {
        transform: translateX(-100%);
    }

    .left-sidebar.expanded {
        transform: translateX(0);
        width: 240px;
    }

    .media-content {
        margin-left: 0;
        margin-right: 0;
    }
}

.left-sidebar {
    width: 240px; /* Default width */
    transition: width 0.3s ease-in-out;
}

.left-sidebar.collapsed {
    width: 40px;
    overflow: hidden;
}

.left-sidebar .sidebar-toggle {
    position: absolute;
    bottom: 20px;
    left: 5px;
    display: block;
}

.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 5px;
    display: none;
}

.left-sidebar.collapsed .sidebar-expand {
    display: block;
}

.left-sidebar.collapsed .sidebar-toggle {
    display: none;
}

/* Hide text when sidebar is collapsed */
.left-sidebar.collapsed .nav-text {
    display: none;
}



    .left-sidebar.collapsed {
    width: 40px;
    overflow: hidden;
}

/* Assuming there's a container for your sidebar content */
.left-sidebar.collapsed .sidebar-content {
    display: none;
}

/* If you can't or don't want to use a specific class for the content */
.left-sidebar.collapsed > *:not(.sidebar-toggle):not(.sidebar-expand) {
    display: none;
}

/* Ensure the toggle button is always visible at the bottom */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 5px;
    width: 30px;  /* Adjust as necessary */
    height: 30px; /* Adjust as necessary */
}
    .left-sidebar.collapsed {
    width: 40px;
    overflow: hidden;
}

/* Hide all elements inside the sidebar except for the toggle buttons */
.left-sidebar.collapsed .sidenav {
    display: none;
}

/* Make sure the toggle buttons are visible */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 5px;
    z-index: 1001; /* Ensure it's above any potential overlay */
    display: block;
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    background-color: #f3f4f6;
}

.left-sidebar.collapsed .sidebar-toggle {
    display: none;
}

.left-sidebar.collapsed .sidebar-expand {
    display: block;
}


    .right-sidebar .sidebar-header .sidebar-toggle {
    display: block;
}

.right-sidebar .sidebar-header .sidebar-expand {
    display: none;
    position: absolute;
    top: 20px;
    right: 20px; /* Adjust as needed */
}

.right-sidebar.collapsed .sidebar-header .sidebar-toggle {
    display: none;
}

.right-sidebar.collapsed .sidebar-header .sidebar-expand {
    display: block;
}
    .right-sidebar .sidebar-header .sidebar-toggle {
    display: block;
}

.right-sidebar .sidebar-header .sidebar-expand {
    display: none;
    position: absolute;
    top: 20px;
    right: 20px; /* Adjust as needed */
}

.right-sidebar.collapsed .sidebar-header .sidebar-toggle {
    display: none;
}

.right-sidebar.collapsed .sidebar-header .sidebar-expand {
    display: block;
}
.right-sidebar .sidebar-header .sidebar-toggle {
    /* Keep this as is */
    display: block;
}

.right-sidebar .sidebar-header .sidebar-expand {
    display: none;
    position: fixed; /* Changed from absolute to fixed to keep it in place */
    top: 20px;
    right: 20px; /* Adjust as needed */
    z-index: 1001; /* Ensure it's above other elements */
}

.right-sidebar.collapsed .sidebar-header .sidebar-toggle {
    display: none;
}

.right-sidebar.collapsed .sidebar-header .sidebar-expand {
    display: block;
}
    .right-sidebar .sidebar-header {
    position: relative;
}

.right-sidebar .sidebar-header .sidebar-toggle {
    position: absolute;
    top: 20px;
    right: 20px; /* Ensure this matches your desired position */
}



.right-sidebar .sidebar-header {
    position: relative;
    padding: 20px; /* Ensure there's space for the buttons */
}

.right-sidebar .sidebar-header .sidebar-toggle {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1002; /* Above sidebar content */
}

.right-sidebar .sidebar-header .sidebar-expand {
    position: fixed; /* Use fixed to ensure it stays in place even when sidebar is hidden */
    top: 20px;
    right: 20px;
    z-index: 1003; /* Ensure it's above everything else */
    display: none;
}

.right-sidebar.collapsed .sidebar-header .sidebar-toggle {
    display: none;
}

.right-sidebar.collapsed .sidebar-header .sidebar-expand {
    display: block;
}
    /* Move the 'expand' button to the upper right corner of the page */
.right-sidebar .sidebar-header {
    position: relative;
}

.right-sidebar .sidebar-header .sidebar-expand {
    position: absolute;
    top: 20px; /* Adjust top distance */
    right: 20px; /* Adjust right distance */
    display: none;
}

.right-sidebar.collapsed .sidebar-header .sidebar-expand {
    display: block;
}

/* Keep the collapse button at its original position in the sidebar header */
.right-sidebar .sidebar-header .sidebar-toggle {
    position: relative;
    display: block;
}


/* Position the expand button at the top-right corner of the page */
.right-sidebar .sidebar-header {
    position: relative;
}

.right-sidebar .sidebar-header .sidebar-expand {
    position: absolute;
    top: 10px;  /* Adjust top distance */
    right: 10px;  /* Adjust right distance */
    display: none;
}

/* Ensure the expand button only shows when sidebar is collapsed */
.right-sidebar.collapsed .sidebar-header .sidebar-expand {
    display: block;
}

/* Ensure the collapse button remains in its original location in the sidebar */
.right-sidebar .sidebar-header .sidebar-toggle {
    position: relative;
    display: block;
}


/* Sidebar header should be relative for proper positioning of the expand button */
.right-sidebar .sidebar-header {
    position: relative;
}

/* Position the expand button at the top-right corner of the page */
.right-sidebar .sidebar-header .sidebar-expand {
    position: absolute;
    top: 10px;  /* Adjust top distance */
    right: 10px;  /* Adjust right distance */
    display: none; /* Hide by default */
}

/* Show the expand button when the sidebar is collapsed */
.right-sidebar.collapsed .sidebar-header .sidebar-expand {
    display: block;
}

/* Ensure the collapse button stays in its original position in the sidebar */
.right-sidebar .sidebar-header .sidebar-toggle {
    position: relative;
    display: block;
}

/* Dashboard layout */
.dashboard {
    display: flex;
    flex-direction: row;
}

/* Sidebar base styles */
.sidebar {
    height: 100vh;
    position: fixed;
    top: 0;
    overflow-y: auto;
    background-color: #FFFFFF;
    padding: 20px;
    box-sizing: border-box;
    z-index: 1000;
    transition: all 0.3s ease-in-out;
}

/* Left sidebar specific */
.left-sidebar {
    left: 0;
    width: 240px;
}

.left-sidebar.collapsed {
    width: 40px;
    overflow: hidden;
}




/* Toggle buttons */
.sidebar-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    z-index: 1002;
}

/* Right sidebar toggle button positioning */
.right-sidebar .sidebar-toggle {
    top: 20px;
    right: 20px;
}

/* Outside toggle button for collapsed right sidebar */
.outside-toggle {
    position: fixed;
    top: 20px;
    right: 270px; /* Positioned just outside the sidebar */
    transition: right 0.3s ease-in-out;
    background-color: white;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    z-index: 999;
}

.right-sidebar.collapsed ~ .outside-toggle {
    right: 20px;
}

/* Video and iframe containers */
.video-container {
    margin: 0 auto;
    height: 70vh;
    text-align: center;
    overflow: hidden;
    max-width: calc(178vh * 0.7);
}

/* Subtitles styling */
.subtitles-container {
    margin: 0 auto;
    width: 100%;
    max-width: calc(178vh * 0.7);
    text-align: center;
    font-size: calc(1vw + 1vh);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    overflow-y: auto;
    max-height: 24vh;
    padding: 10px;
    box-sizing: border-box;
    background-color: #fff;
}

/* Responsive design */
@media (max-width: 768px) {
    .dashboard {
        flex-direction: column;
    }

    .sidebar {
        width: 100%;
        height: auto;
        position: relative;
    }

    .media-content {
        margin-left: 0;
        margin-right: 0;
    }

    .outside-toggle {
        top: 10px;
        right: 10px;
    }
}
/* Add these styles to your existing CSS */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 10px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.left-sidebar .sidebar-toggle:hover,
.left-sidebar .sidebar-expand:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.left-sidebar .sidebar-toggle svg,
.left-sidebar .sidebar-expand svg {
    width: 20px;
    height: 20px;
    stroke: #6b7280;
}

/* Video container should take up most of the vertical space */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .video-container {
    height: 80vh; /* Increase height */
    max-width: 100%; /* Allow it to take full width */
}

/* Subtitles container should also take up more space */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .subtitles-container {
    max-height: 30vh; /* Increase height */
    max-width: 100%; /* Allow it to take full width */
}

/* Move the buttons-container to a vertical sidebar on the side */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container {
    position: fixed;
    top: 50%;
    right: 0;
    transform: translateY(-50%);
    flex-direction: column;
    gap: 10px;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px;
    border-radius: 8px 0 0 8px;
    box-shadow: -2px 0 4px rgba(0, 0, 0, 0.1);
    z-index: 1000;
}

/* Adjust the button styles for the vertical sidebar */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container .button-group {
    flex-direction: column;
    align-items: center;
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container .icon-button {
    margin: 5px 0;
}

/* Ensure the buttons container is visible and properly aligned */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container {
    display: flex;
}
    <style>
/* Styles for the sidebar toggle buttons */
.sidebar-toggle,
.sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 10px;
    width: 32px;  /* Ensure the button has a fixed size */
    height: 32px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}


/* SVG within the toggle buttons */
.sidebar-toggle svg,
.sidebar-expand svg {
    width: 20px;  /* Make sure the SVG fits within the button */
    height: 20px;
    stroke: #6b7280;
}

/* Specific to the left sidebar */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    left: 10px;  /* Adjust if necessary */
    bottom: 20px;  /* Adjust if necessary */
}

/* Specific to the right sidebar */
.right-sidebar .sidebar-toggle,
.right-sidebar .sidebar-expand {
    right: 10px;  /* Adjust for right positioning */
    left: auto;
}

/* Ensure the SVG is centered within its circular button */
.sidebar-toggle svg path,
.sidebar-expand svg path {
    fill: none;  /* If your paths need to be empty */
    stroke-linecap: round;
    stroke-linejoin: round;
}

/* Visibility of expand/collapse buttons */
.sidebar-toggle {
    display: block;
}

.sidebar-expand {
    display: none;
}

.collapsed .sidebar-toggle {
    display: none;
}

.collapsed .sidebar-expand {
    display: block;
}
</style>
<style>
/* Styles for the sidebar toggle buttons */
.sidebar-toggle,
.sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 10px;
    width: 32px;  /* Ensure the button has a fixed size */
    height: 32px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 50%;  /* Changed to 50% for a circular button */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}



/* SVG within the toggle buttons */
.sidebar-toggle svg,
.sidebar-expand svg {
    width: 20px;  /* Make sure the SVG fits within the button */
    height: 20px;
    stroke: #6b7280;
}

/* Specific to the left sidebar */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    left: 10px;  /* Adjust if necessary */
    bottom: 20px;  /* Adjust if necessary */
}

/* Specific to the right sidebar */
.right-sidebar .sidebar-toggle,
.right-sidebar .sidebar-expand {
    right: 10px;  /* Adjust for right positioning */
    left: auto;
}

/* Ensure the SVG is centered within its button */
.sidebar-toggle svg path,
.sidebar-expand svg path {
    fill: none;  /* If your paths need to be empty */
    stroke-linecap: round;
    stroke-linejoin: round;
}

/* Visibility of expand/collapse buttons */
.sidebar-toggle {
    display: block;
}

.sidebar-expand {
    display: none;
}

.collapsed .sidebar-toggle {
    display: none;
}

.collapsed .sidebar-expand {
    display: block;
}
    /* Ensure all icon buttons have consistent styling */
.buttons-container .icon-button {
    width: 36px;
    height: 36px;
    padding: 0; /* Remove any padding that might throw off centering */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Specific styling for the toggle button */
.buttons-container button.icon-button svg {
    width: 100%; /* Make SVG fill its container */
    height: 100%;
    /* Ensure SVG content scales correctly */
    preserveAspectRatio: "xMidYMid meet";
}

/* If the SVG viewBox is disproportionate, you might need to adjust this */
.buttons-container button.icon-button[onclick="toggleSidebar()"] svg {
    /* Adjust viewBox to match dimensions or scale appropriately */
    viewBox: "0 0 24 24"; /* Example, adjust based on your actual SVG dimensions */
}

/* If there's additional padding or margin on the SVG itself */
.buttons-container button.icon-button svg {
    margin: 0; /* Remove any margin */
    padding: 0; /* Remove any padding */
}
    .buttons-container .icon-button {
    border: 2px solid #e0e0e0; /* or whatever color you want */
}
    /* Toggle Button Styling */
.sidebar-toggle, .sidebar-expand {
    background-color: #f9f9f9;
    border: 2px solid #e0e0e0;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}



/* Adjust the SVG icon size */
.sidebar-toggle svg, .sidebar-expand svg {
    width: 20px;
    height: 20px;
    stroke: #6b7280;
}

/* Toggle button position adjustments */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 10px;
}

.right-sidebar .sidebar-toggle,
.right-sidebar .sidebar-expand {
    position: absolute;
    top: 20px;
    right: 20px;
}

/* Show the expand button when collapsed */
.collapsed .sidebar-toggle {
    display: none;
}

.collapsed .sidebar-expand {
    display: block;
}
    /* Toggle Button Styling */
.sidebar-toggle, .sidebar-expand {
    background-color: #f9f9f9;
    border: 2px solid #e0e0e0;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}



/* Adjust the SVG icon size */
.sidebar-toggle svg, .sidebar-expand svg {
    width: 20px;
    height: 20px;
    stroke: #6b7280;
}

/* Toggle button position adjustments */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 10px;
}

.right-sidebar .sidebar-toggle,
.right-sidebar .sidebar-expand {
    position: absolute;
    top: 20px;
    right: 20px;
}

/* Show the expand button when collapsed */
.collapsed .sidebar-toggle {
    display: none;
}
 .collapsed .sidebar-expand {
    display: block;
}


/* Toggle Button Styling - Without Circle */
.sidebar-toggle, .sidebar-expand {
    background-color: transparent;
    border: none;
    width: 30px;  /* Adjust the width and height of the icon directly */
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}


/* Adjust the SVG icon size */
.sidebar-toggle svg, .sidebar-expand svg {
    width: 20px;  /* Adjust size of the lines */
    height: 20px;
    stroke: #6b7280;
}

/* Positioning of the button remains the same */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 10px;
}

.right-sidebar .sidebar-toggle,
.right-sidebar .sidebar-expand {
    position: absolute;
    top: 20px;
    right: 20px;
}

/* Show the expand button when collapsed */
.collapsed .sidebar-toggle {
    display: none;
}

.collapsed .sidebar-expand {
    display: block;
}
/* Toggle Button Styling - Without Circle */
.sidebar-toggle, .sidebar-expand {
    background-color: transparent;  /* No background color */
    border: none;  /* No border */
    width: 30px;  /* Adjust the width of the icon */
    height: 30px;  /* Adjust the height of the icon */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

/* Adjust the SVG icon size */
.sidebar-toggle svg, .sidebar-expand svg {
    width: 20px;  /* Size of the lines */
    height: 20px;
    stroke: #6b7280;  /* Icon color */
}

/* Positioning of the button remains the same */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px;
    left: 10px;
}

.right-sidebar .sidebar-toggle,
.right-sidebar .sidebar-expand {
    position: absolute;
    top: 20px;
    right: 20px;
}

/* Show the expand button when collapsed */
.collapsed .sidebar-toggle {
    display: none;
}

.collapsed .sidebar-expand {
    display: block;
}
    .sidebar-toggle, .sidebar-expand {
    background-color: transparent;  /* No background color */
    border: none;  /* No border */
    width: 30px;  /* Adjust the width */
    height: 30px;  /* Adjust the height */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: none;  /* Remove the shadow */
    border-radius: 0%;  /* Remove the rounded corners, making it a square */
}
/* When only the left sidebar is collapsed */
.left-sidebar.collapsed:not(.right-sidebar.collapsed) ~ .media-content {
    margin-left: 40px; /* Space for the collapsed left sidebar */
    margin-right: 250px; /* Space for the open right sidebar */
    width: calc(100% - 290px); /* Total width minus both sidebars */
}

/* Adjust the elements inside media-content */
.left-sidebar.collapsed:not(.right-sidebar.collapsed) ~ .media-content .video-container,
.left-sidebar.collapsed:not(.right-sidebar.collapsed) ~ .media-content .subtitles-container,
.left-sidebar.collapsed:not(.right-sidebar.collapsed) ~ .media-content .buttons-container {
    max-width: 100%; /* Allow these to take full width within media-content */
}

/* Ensure the video container grows appropriately */
.left-sidebar.collapsed:not(.right-sidebar.collapsed) ~ .media-content .video-container {
    height: 75vh; /* Increase height slightly if needed */
}

/* Adjust subtitles and buttons if necessary */
.left-sidebar.collapsed:not(.right-sidebar.collapsed) ~ .media-content .subtitles-container {
    max-height: 25vh; /* Adjust max height if subtitles need more space */
}

.left-sidebar.collapsed:not(.right-sidebar.collapsed) ~ .media-content .buttons-container {
    max-width: 100%; /* Ensure buttons can span full width */
    justify-content: center; /* Center the buttons if needed */
}
/* Ensure the toggle button is properly centered and clickable */
.sidebar-toggle, .sidebar-expand {
    background-color: transparent;
    border: none;
    width: 40px;  /* Adjust the width */
    height: 40px;  /* Adjust the height */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;  /* Remove padding */
    margin: 0;  /* Remove margin */
    position: absolute;
    bottom: 20px;
    left: 10px;
}

/* Ensure the SVG icon is centered */
.sidebar-toggle svg, .sidebar-expand svg {
    width: 20px;  /* Adjust the size of the icon */
    height: 20px;
    stroke: #6b7280;  /* Icon color */
    margin: 0;  /* Remove margin */
    padding: 0;  /* Remove padding */
}

/* Show the expand button when collapsed */
.collapsed .sidebar-toggle {
    display: none;
}

.collapsed .sidebar-expand {
    display: block;
}
    .subplayer-page .navbar {
    z-index: 1001; /* Higher than the sidebar's z-index */
    position: fixed; /* Keep it fixed if you want it to stay at the top */
    width: 100%;
    top: 0;
    left: 0;
}
.nav-link {
    display: flex;
    align-items: center;
    justify-content: start; /* Ensures icons and text are aligned */
    padding: 12px 16px; /* Ensure padding consistency */
    width: 100%; /* Prevent shrinking */
    transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
}

.nav-link.active {
    background-color: #007BFF !important; /* Ensure active state has correct background */
    color: white !important;
    width: 100% !important; /* Prevents width shrinking */
    padding: 12px 16px !important; /* Ensures no padding change */
    box-sizing: border-box; /* Ensures it respects width without overflow */
}

/* Ensure icon container does not shrink */
.nav-link .icon {
    min-width: 48px; /* Ensure consistent icon size */
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Ensure text does not shrink */
.nav-link span {
    white-space: nowrap;
    flex-grow: 1;
}
/* Sidebar Toggle Button */
.sidebar-toggle {
    display: flex;
    align-items: center;
    justify-content: center; /* Ensures the icon is centered */
    width: 40px; /* Adjust button size */
    height: 40px; /* Ensure button is a perfect circle */
    background-color: #f9f9f9;
    border: 2px solid #e0e0e0;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease-in-out;
    cursor: pointer;
    padding: 0; /* Remove any unwanted padding */
}

/* Ensures the SVG inside stays centered */
.sidebar-toggle .toggle-button-inner {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%; /* Ensure it fills the button */
    height: 100%;
}

/* Ensures the SVG itself is centered */
.sidebar-toggle svg {
    width: 24px;
    height: 24px;
    stroke: #6b7280;
    margin: auto;
    display: block; /* Prevents any unwanted flex effects */
}
/* Ensure default padding remains, but prevent blue background from touching the right edge */
.left-sidebar .nav-link {
    display: flex;
    align-items: center;
    justify-content: start;
    padding-left: 12px; /* Keep default left padding */
    padding-right: 12px; /* Ensure consistent padding */
    width: calc(100% - 10px); /* Reduce width slightly to add right spacing */
    margin-right: 5px; /* Ensures right gap */
    transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
}

/* Default styling for sidebar links */
.left-sidebar .nav-link {
    display: flex;
    align-items: center;
    justify-content: start;
    padding-left: 12px; /* Keep default left padding */
    padding-right: 12px; /* Keep default right padding */
    max-width: 95%; /* Ensures it doesn't reach the right edge */
    box-sizing: border-box; /* Prevents overflow issues */
    transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
}

/* Active state */
.left-sidebar .nav-link.active {
    background-color: #007BFF !important;
    color: white !important;
    max-width: 95% !important; /* Keeps a slight right gap */
    box-sizing: border-box; /* Prevents border overflow */
}

/* Hover state */
.left-sidebar .nav-link:hover {
    background-color: rgba(0, 123, 255, 0.15); /* Light blue hover */
    color: #007BFF;
    max-width: 95%; /* Ensures it doesn't touch the right edge */
    box-sizing: border-box;
}
/* Base style for sidebar links */
.left-sidebar .nav-link {
    display: flex;
    align-items: center;
    justify-content: start;
    padding-left: 12px; /* Maintain standard left padding */
    padding-right: 16px; /* Add small padding to create gap */
    width: calc(100% - 10px); /* Slightly reduce width to prevent touching the right edge */
    box-sizing: border-box; /* Ensure proper sizing */
    transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
    border-radius: 4px; /* Slight rounding */
}

/* Active state with a gap */
.left-sidebar .nav-link.active {
    background-color: #007BFF !important;
    color: white !important;
    padding-right: 20px !important; /* Increase padding to create space */
    border-radius: 4px;
}

/* Navigation Links */
.nav-link {
    display: flex;
    align-items: center;
    justify-content: start;
    padding-left: 12px; /* Maintain left padding */
    padding-right: 8px; /* Add a small right gap */
    max-width: calc(100% - 8px); /* Prevents touching the right edge */
    box-sizing: border-box; /* Prevents unwanted overflow */
    border-radius: 8px; /* Optional: Makes rounded corners */
    transition: background-color 0.2s ease-in-out;
}

/* Active Navigation Link */
.nav-link.active {
    background: linear-gradient(135deg, #1a1f36 0%, #3a9fff 100%);
    color: white !important;
    max-width: calc(100% - 8px) !important; /* Keeps right padding consistent */
}

/* Hover Effect */
.nav-link:hover {
    background-color: rgba(128, 128, 128, 0.1);
    max-width: calc(100% - 8px); /* Ensures the right gap remains */
}
/* Ensure the sidebar items have padding on the right */
.navbar-nav {
    padding-right: 8px; /* Adds a small gap on the right */
}

/* Ensure individual nav items don't stretch fully */
.nav-item {
    margin-right: 8px; /* Creates the right-side gap */
}


</style>
<style>
/* XP Button Styling */
#unique-xp-display {
    background: linear-gradient(135deg, #1a1f36 0%, #3a9fff 100%);
    color: white;
    padding: 8px 16px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 12px rgba(58, 159, 255, 0.2);
    transition: all 0.3s ease;
}

#unique-xp-display:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(58, 159, 255, 0.3);
}

#unique-xp-display .unique-xp-circle {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.9rem;
}

/* Align XP element further to the right */
.sidebar-header {
    display: flex;
    justify-content: flex-end; /* Push XP element to the right */
    align-items: center;
    padding-right: 0px; /* Add some right padding for further alignment */
}

/* Ensure XP display does not shrink */
#unique-xp-display {
    margin-left: auto; /* Ensures it moves all the way to the right */
}

/* =========================================
   ADD THIS AT THE END OF YOUR CSS
   ========================================= */
@media (max-width: 992px) {
  /* Hide left sidebar, remove left margin */
  .left-sidebar {
    display: none !important;
  }
  .media-content {
    margin-left: 0 !important;
  }
}

@media (max-width: 768px) {
  /* Hide right sidebar, remove right margin */
  .right-sidebar {
    display: none !important;
  }
  .media-content {
    margin-right: 0 !important;
  }
}

        .limit-popup.active,
        .overlay.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .popup-content {
            padding: 24px;
        }

        .popup-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .warning-icon {
            background-color: #FEF3C7;
            color: #D97706;
            padding: 8px;
            border-radius: 50%;
            margin-right: 12px;
        }

        .popup-title {
            font-size: 18px;
            font-weight: 600;
            color: #1F2937;
            margin: 0;
        }

        .popup-message {
            color: #6B7280;
            margin-bottom: 24px;
            line-height: 1.5;
        }

        .button-container {
            display: flex;
            gap: 12px;
        }

        .upgrade-button {
            flex: 1;
            padding: 12px;
            background-color: #3B82F6;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .upgrade-button:hover {
            background-color: #2563EB;
        }

        .close-button {
            flex: 1;
            padding: 12px;
            background-color: #F3F4F6;
            color: #4B5563;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .close-button:hover {
            background-color: #E5E7EB;
        }
    .limit-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(1);
    background-color: white;
    width: 90%;
    max-width: 400px;
    border-radius: 12px;
    z-index: 1000;
    opacity: 0;
    transition: all 0.3s ease;
    box-shadow: none !important; /* REMOVE SHADOW */
}
.limit-popup::before,
.limit-popup::after {
    display: none !important;
}
/* Apply styles ONLY to the left sidebar */
#sidenav-main {
    background-color: #ffffff; /* White background */
    border-radius: 12px; /* Match the rounded corners of the right sidebar */
    padding: 10px; /* Ensure consistent padding */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Add subtle shadow */
    margin-bottom: 20px; /* Ensure proper spacing */
    max-height: calc(100vh - 40px); /* Prevent overflow */
    overflow-y: auto; /* Enable scrolling if needed */
}

/* Ensure the left sidebar keeps its shape when collapsed */
#sidenav-main.collapsed {
    width: 60px; /* Adjust width when collapsed */
    overflow: hidden;
}

/* Ensure consistent header styling */
#sidenav-main .sidenav-header {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100px; /* Match right sidebar */
}

/* Ensure consistent sidebar logo size */
#sidenav-main .custom-logo-size {
    height: 50px !important; /* Ensure logo is properly sized */
}

/* Keep the collapse button functional */
#sidenav-main .collapse-button {
    position: absolute;
    top: 10px;
    right: 10px;
    background: transparent;
    border: none;
    cursor: pointer;
}
/* Ensure both sidebars have the same rounded corners and height */
#sidenav-main,
.right-sidebar {
    background-color: #ffffff; /* White background */
    border-radius: 12px; /* Match the rounded corners */
    padding: 10px; /* Ensure consistent padding */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Add subtle shadow */
    margin-bottom: 20px; /* Ensure proper spacing */
    max-height: calc(100vh - 40px); /* Prevent overflow */
    overflow-y: auto; /* Enable scrolling if needed */
}

/* Ensure the right sidebar keeps its shape when collapsed */
.right-sidebar.collapsed {
    width: 60px; /* Adjust width when collapsed */
    overflow: hidden;
}

/* Ensure consistent header styling */
#sidenav-main .sidenav-header,
.right-sidebar .sidebar-header {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100px; /* Match height */
}

/* Ensure consistent sidebar logo size */
#sidenav-main .custom-logo-size,
.right-sidebar .custom-logo-size {
    height: 50px !important; /* Ensure logo is properly sized */
}

/* Keep the collapse button functional */
#sidenav-main .collapse-button,
.right-sidebar .collapse-button {
    position: absolute;
    top: 10px;
    right: 10px;
    background: transparent;
    border: none;
    cursor: pointer;
}

/* Adjust media content when sidebars are collapsed */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content {
    margin-left: 40px; /* Adjust for collapsed sidebars */
    margin-right: 0;
    width: calc(100% - 40px);
}

/* Ensure both sidebars remain consistent in width */
.left-sidebar,
.right-sidebar {
    width: 240px; /* Default width */
    transition: width 0.3s ease-in-out;
}

/* When collapsed, both sidebars should shrink */
.left-sidebar.collapsed,
.right-sidebar.collapsed {
    width: 60px;
    overflow: hidden;
}

/* Sidebar Toggle Buttons */
.left-sidebar .sidebar-toggle,
.right-sidebar .sidebar-toggle {
    position: absolute;
    bottom: 20px;
    left: 10px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.left-sidebar .sidebar-toggle:hover,
.right-sidebar .sidebar-toggle:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

/* Sidebar Collapsed State */
.right-sidebar.collapsed ~ .media-content {
    margin-right: 0;
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 40px;
}
.media-content {
    flex-grow: 1;
    padding: 20px;
    margin-left: 280px; /* Width of left sidebar */
    margin-right: 250px; /* Width of right sidebar */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out;
}

/* Ensure space at the top of the right sidebar */
.right-sidebar {
    right: 0;
    width: 250px;
    height: 100vh;
    position: fixed;
    top: 0;
    padding-top: 20px; /* Add space at the top, matching the left sidebar */
    overflow-y: auto;
    background-color: #FFFFFF;
    box-sizing: border-box;
    z-index: 1000;
    transition: transform 0.3s ease-in-out;
}

/* When sidebar is collapsed, adjust media content */
.sidebar.collapsed ~ .media-content {
    margin-left: 40px; /* Adjust for collapsed left sidebar */
    margin-right: 0; /* No right margin when right sidebar is collapsed */
    width: calc(100% - 40px); /* Adjust width to account for left sidebar */
}
.media-content {
    flex-grow: 1;
    padding: 20px; /* Maintains the initial gap */
    margin-left: 240px; /* Default with expanded left sidebar */
    margin-right: 250px; /* Default with expanded right sidebar */
    width: calc(100% - 490px); /* Total width minus sidebars (240px + 250px) */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out, width 0.3s ease-in-out;
    box-sizing: border-box;
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 40px; /* Collapsed left sidebar */
    width: calc(100% - 290px); /* Adjust for collapsed left (40px) + right (250px) */
}

.video-container {
    margin: 0 auto;
    height: 70vh;
    text-align: center;
    overflow: hidden;
    width: 100%; /* Fill media-content minus padding */
    max-width: calc(100% - 40px); /* Respect 20px padding on both sides */
    box-sizing: border-box;
}

iframe {
    width: 100%;
    height: 100%;
    border: none;
}
    .media-content {
    flex-grow: 1;
    padding: 20px; /* Maintains the initial gap */
    margin-left: 240px; /* Default with expanded left sidebar */
    margin-right: 250px; /* Default with expanded right sidebar */
    width: calc(100% - 490px); /* Total width minus sidebars (240px + 250px) */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out, width 0.3s ease-in-out;
    box-sizing: border-box;
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 40px; /* Collapsed left sidebar */
    width: calc(100% - 290px); /* Adjust for collapsed left (40px) + right (250px) */
}

.video-container {
    margin: 0 auto;
    height: 70vh;
    text-align: center;
    overflow: hidden;
    width: 100%; /* Fill media-content minus padding */
    max-width: calc(100% - 40px); /* Respect 20px padding on both sides */
    box-sizing: border-box;
}

.subtitles-container {
    margin: 0 auto;
    max-height: 24vh; /* Original height limit */
    text-align: center;
    font-size: calc(1vw + 1vh);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    overflow-y: auto;
    padding: 10px;
    background-color: #fff;
    width: 100%; /* Match video-container */
    max-width: calc(100% - 40px); /* Match video-container exactly */
    box-sizing: border-box;
}

iframe {
    width: 100%;
    height: 100%;
    border: none;
}
    .media-content {
    flex-grow: 1;
    padding: 20px; /* Maintains the 20px gap */
    margin-left: 260px; /* 240px sidebar + 20px gap */
    margin-right: 260px; /* 240px sidebar + 20px gap */
    width: calc(100% - 520px); /* Total width minus sidebars + gaps (240 + 20 + 240 + 20) */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out, width 0.3s ease-in-out;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center; /* Center children horizontally */
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px collapsed sidebar + 20px gap */
    width: calc(100% - 320px); /* Adjust for collapsed left (40 + 20) + right (240 + 20) */
}

.right-sidebar.collapsed ~ .media-content {
    margin-right: 20px; /* Just the 20px gap */
    width: calc(100% - 280px); /* Adjust for left (240 + 20) + collapsed right (0 + 20) */
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px + 20px gap */
    margin-right: 20px; /* 20px gap */
    width: calc(100% - 80px); /* Total width minus collapsed left (40 + 20) + collapsed right (0 + 20) */
}

.video-container {
    margin: 0 auto;
    height: 70vh;
    text-align: center;
    overflow: hidden;
    width: 100%; /* Fill media-content minus padding */
    max-width: calc(100% - 40px); /* Respect 20px padding on both sides */
    box-sizing: border-box;
}

.subtitles-container {
    margin: 0 auto;
    max-height: 24vh; /* Original height limit */
    text-align: center;
    font-size: calc(1vw + 1vh);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    overflow-y: auto;
    padding: 10px;
    background-color: #fff;
    width: 100%; /* Match video-container */
    max-width: calc(100% - 40px); /* Match video-container exactly */
    box-sizing: border-box;
}

iframe {
    width: 100%;
    height: 100%;
    border: none;
}

.right-sidebar {
    right: 0;
    width: 240px; /* Match left sidebar for symmetry */
    height: 100vh;
    position: fixed;
    top: 0;
    padding-top: 20px;
    overflow-y: auto;
    background-color: #FFFFFF;
    box-sizing: border-box;
    z-index: 1000;
    transition: transform 0.3s ease-in-out;
}
    .dashboard {
    display: flex;
    flex-direction: row;
    width: 100%;
    min-height: 100vh;
    position: relative;
}

.media-content {
    padding: 20px; /* Maintains the 20px gap */
    margin-left: 260px; /* 240px sidebar + 20px gap */
    margin-right: 260px; /* 240px sidebar + 20px gap */
    width: calc(100% - 520px); /* Total width minus sidebars + gaps (240 + 20 + 240 + 20) */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out, width 0.3s ease-in-out;
    box-sizing: border-box;
    margin-left: auto; /* Center horizontally */
    margin-right: auto;
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px collapsed sidebar + 20px gap */
    width: calc(100% - 320px); /* Adjust for collapsed left (40 + 20) + right (240 + 20) */
}

.right-sidebar.collapsed ~ .media-content {
    margin-right: 20px; /* Just the 20px gap */
    width: calc(100% - 280px); /* Adjust for left (240 + 20) + collapsed right (0 + 20) */
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px + 20px gap */
    margin-right: 20px; /* 20px gap */
    width: calc(100% - 80px); /* Total width minus collapsed left (40 + 20) + collapsed right (0 + 20) */
}

.video-container {
    margin: 0 auto;
    height: 70vh;
    text-align: center;
    overflow: hidden;
    width: 100%; /* Fill media-content minus padding */
    max-width: calc(100% - 40px); /* Respect 20px padding on both sides */
    box-sizing: border-box;
}

.subtitles-container {
    margin: 0 auto;
    max-height: 24vh; /* Original height limit */
    text-align: center;
    font-size: calc(1vw + 1vh);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    overflow-y: auto;
    padding: 10px;
    background-color: #fff;
    width: 100%; /* Match video-container */
    max-width: calc(100% - 40px); /* Match video-container exactly */
    box-sizing: border-box;
}

iframe {
    width: 100%;
    height: 100%;
    border: none;
}

.right-sidebar {
    right: 0;
    width: 240px; /* Match left sidebar for symmetry */
    height: 100vh;
    position: fixed;
    top: 0;
    padding-top: 20px;
    overflow-y: auto;
    background-color: #FFFFFF;
    box-sizing: border-box;
    z-index: 1000;
    transition: transform 0.3s ease-in-out;
}
    .dashboard {
    display: flex;
    flex-direction: row;
    width: 100%;
    min-height: 100vh;
    position: relative;
}

.media-content {
    padding: 20px; /* Maintains the 20px gap */
    margin-left: 260px; /* 240px sidebar + 20px gap */
    margin-right: 260px; /* 240px sidebar + 20px gap */
    width: calc(100% - 520px); /* Total width minus sidebars + gaps (240 + 20 + 240 + 20) */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out, width 0.3s ease-in-out;
    box-sizing: border-box;
    margin-left: auto; /* Center horizontally */
    margin-right: auto;
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px collapsed sidebar + 20px gap */
    width: calc(100% - 320px); /* Adjust for collapsed left (40 + 20) + right (240 + 20) */
}

.right-sidebar.collapsed ~ .media-content {
    margin-right: 20px; /* Just the 20px gap */
    width: calc(100% - 280px); /* Adjust for left (240 + 20) + collapsed right (0 + 20) */
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px + 20px gap */
    margin-right: 20px; /* 20px gap */
    width: calc(100% - 80px); /* Total width minus collapsed left (40 + 20) + collapsed right (0 + 20) */
}

.video-container {
    margin: 0 auto;
    height: 70vh;
    text-align: center;
    overflow: hidden;
    width: 100%; /* Fill media-content minus padding */
    max-width: calc(100% - 40px); /* Respect 20px padding on both sides */
    box-sizing: border-box;
}

.subtitles-container {
    margin: 0 auto;
    max-height: 24vh; /* Original height limit */
    text-align: center;
    font-size: calc(1vw + 1vh);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    overflow-y: auto;
    padding: 10px;
    background-color: #fff;
    width: 100%; /* Match video-container */
    max-width: calc(100% - 40px); /* Match video-container exactly */
    box-sizing: border-box;
}

iframe {
    width: 100%;
    height: 100%;
    border: none;
}

.right-sidebar {
    right: 0;
    width: 240px; /* Match left sidebar for symmetry */
    height: 100vh;
    position: fixed;
    top: 0;
    padding-top: 20px;
    overflow-y: auto;
    background-color: #FFFFFF;
    box-sizing: border-box;
    z-index: 1000;
    transition: transform 0.3s ease-in-out;
}
    .right-sidebar {
    right: 0; /* Aligns to the right edge */
    width: 240px; /* Matches left sidebar width */
    height: 100vh;
    position: fixed;
    top: 0; /* Aligns to the top edge */
    padding: 20px; /* Consistent padding on all sides, creating a 20px gap from top and right */
    overflow-y: auto;
    background-color: #FFFFFF;
    box-sizing: border-box; /* Ensures padding is included in width/height */
    z-index: 1000;
    transition: transform 0.3s ease-in-out, width 0.3s ease-in-out; /* Smooth transition for collapse/expand */
    border-radius: 12px; /* Matches left sidebar rounding */
    margin: 20px 20px 20px 0; /* Adds 20px margin on top, right, and bottom for gap from screen edges */
}

/* Collapsed State for Right Sidebar */
.right-sidebar.collapsed {
    width: 60px; /* Matches collapsed left sidebar width */
    overflow: hidden;
    margin-right: 20px; /* Maintains 20px gap from right edge when collapsed */
}

/* Ensure toggle buttons are positioned correctly */
.right-sidebar .sidebar-toggle,
.right-sidebar .sidebar-expand {
    position: absolute;
    top: 10px; /* Adjusted to align with the 20px padding/margin */
    right: 10px; /* Adjusted to stay within the sidebars padding */
    width: 30px;
    height: 30px;
    background-color: transparent;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

/* Show expand button when collapsed */
.right-sidebar.collapsed .sidebar-toggle {
    display: none;
}

.right-sidebar.collapsed .sidebar-expand {
    display: block;
}

/* Media Content Adjustments */
.media-content {
    padding: 20px; /* Maintains consistent gap */
    margin-left: 260px; /* 240px left sidebar + 20px gap */
    margin-right: 260px; /* 240px right sidebar + 20px gap */
    width: calc(100% - 520px); /* Total width minus sidebars + gaps */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out, width 0.3s ease-in-out;
    box-sizing: border-box;
}

.right-sidebar.collapsed ~ .media-content {
    margin-right: 80px; /* 60px collapsed sidebar + 20px gap */
    width: calc(100% - 340px); /* Adjust for left (240px + 20px) + collapsed right (60px + 20px) */
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px collapsed sidebar + 20px gap */
    width: calc(100% - 320px); /* Adjust for collapsed left (40px + 20px) + right (240px + 20px) */
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px + 20px gap */
    margin-right: 80px; /* 60px + 20px gap */
    width: calc(100% - 140px); /* Total width minus collapsed left (40px + 20px) + collapsed right (60px + 20px) */
}
    /* Play All Highlights Button Styling */
#play-all-btn {
    background: linear-gradient(135deg, #1a1f36 0%, #3a9fff 100%); /* Matches XP button gradient */
    color: white; /* White text for contrast */
    padding: 10px 20px; /* Slightly taller and wider padding for a balanced look */
    border-radius: 12px; /* Matches XP buttons rounded corners */
    border: none; /* Remove default border */
    font-weight: 500; /* Slightly bold text */
    font-size: 1rem; /* Consistent font size */
    display: flex; /* Flex for centering text */
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(58, 159, 255, 0.2); /* Subtle shadow matching XP */
    cursor: pointer;
    transition: all 0.3s ease; /* Smooth transition for hover effects */
    width: 100%; /* Full width within its container */
    max-width: 200px; /* Optional: caps the width for balance */
    height: 40px; /* Matches XP button height */
}

/* Hover Effect */
#play-all-btn:hover {
    transform: translateY(-2px); /* Slight lift effect like XP button */
    box-shadow: 0 6px 15px rgba(58, 159, 255, 0.3); /* Enhanced shadow on hover */
    background: linear-gradient(135deg, #2a2f46 0%, #4ab0ff 100%); /* Slightly lighter gradient */
}

/* Active/Pressed State */
#play-all-btn:active {
    transform: translateY(0); /* Reset lift on click */
    box-shadow: 0 2px 8px rgba(58, 159, 255, 0.2); /* Reduced shadow when pressed */
}

/* Bottom Buttons Container Adjustment */
.bottom-buttons {
    margin-top: 20px; /* Existing spacing */
    padding-bottom: 10px; /* Existing padding */
    display: flex;
    flex-direction: column;
    align-items: center; /* Center the button */
}

/* Button-XP Container Adjustment */
.button-xp-container {
    display: flex;
    width: 100%;
    justify-content: center; /* Center the button horizontally */
    align-items: center;
}

/* Ensure XP Display Consistency (for reference) */
#unique-xp-display {
    background: linear-gradient(135deg, #1a1f36 0%, #3a9fff 100%);
    color: white;
    padding: 8px 16px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 12px rgba(58, 159, 255, 0.2);
    transition: all 0.3s ease;
}

#unique-xp-display:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(58, 159, 255, 0.3);
}

#unique-xp-display .unique-xp-circle {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.9rem;
}
    /* When both sidebars are collapsed, maximize video and subtitles containers */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .video-container {
    height: 85vh; /* Increase height to use more vertical space */
    width: 100%; /* Ensure full width */
    max-width: calc(100% - 40px); /* Respect 20px padding on each side */
    margin: 0 auto; /* Keep centered */
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .subtitles-container {
    max-height: 30vh; /* Increase height for subtitles */
    width: 100%; /* Ensure full width */
    max-width: calc(100% - 40px); /* Match video-container width */
    margin: 0 auto; /* Keep centered */
}

/* Ensure iframe inside video-container scales appropriately */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .video-container iframe {
    width: 100%;
    height: 100%;
}

/* Adjust buttons-container positioning if needed */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container {
    width: 100%;
    max-width: calc(100% - 40px); /* Match video and subtitles width */
    margin: 20px auto; /* Center it with spacing */
    justify-content: center; /* Keep buttons centered */
}
    /* Default buttons-container styling (when sidebars are not both collapsed) */
.buttons-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin: 20px auto;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    max-width: calc(178vh * 0.7); /* Original max-width */
}

/* When both sidebars are collapsed, position buttons-container as a vertical sidebar */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container {
    position: fixed;
    top: 50%; /* Center vertically */
    right: 20px; /* Align to right edge with 20px gap */
    transform: translateY(-50%); /* Vertically center */
    flex-direction: column; /* Stack buttons vertically */
    width: auto; /* Let content dictate width */
    max-width: 60px; /* Narrow width to avoid overlap */
    padding: 10px; /* Compact padding */
    background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white */
    border-radius: 8px 0 0 8px; /* Rounded on left side only */
    box-shadow: -2px 0 4px rgba(0, 0, 0, 0.1); /* Shadow on left */
    z-index: 1000; /* Above video player */
    margin: 0; /* Remove auto margin to stick to right */
}

/* Ensure button-group items stack vertically */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container .button-group {
    flex-direction: column;
    align-items: center;
    margin: 5px 0; /* Space between buttons */
}

/* Ensure icon-button and dictionary-button sizes remain consistent */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container .icon-button {
    width: 36px;
    height: 36px;
    margin: 5px 0; /* Vertical spacing */
    padding: 0; /* Remove padding to fit */
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container .dictionary-button {
    width: 36px; /* Match icon-button width */
    height: 36px;
    padding: 0; /* Compact */
    font-size: 12px; /* Smaller text if needed */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Tooltip adjustments for vertical layout */
.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content .buttons-container .tooltip-text {
    bottom: auto; /* Position to the left instead of above */
    left: auto;
    right: 100%; /* Position to the left of the button */
    transform: translateX(-10px); /* Offset from button */
    width: 140px; /* Keep tooltip width */
    margin-right: 10px; /* Space between button and tooltip */
}
/* Right sidebar base styles */
.right-sidebar {
    right: 0;
    width: 240px; /* Default width, matches left sidebar for symmetry */
    height: 100vh;
    position: fixed;
    top: 0;
    padding: 20px;
    overflow-y: auto;
    background-color: #FFFFFF;
    box-sizing: border-box;
    z-index: 1000;
    transition: transform 0.3s ease-in-out; /* Smooth slide transition */
}

/* Collapsed state for right sidebar */
.right-sidebar.collapsed {
    transform: translateX(100%); /* Slide fully off-screen to the right */
    /* Remove width: 60px or any other conflicting properties */
}

/* Sidebar header positioning */
.right-sidebar .sidebar-header {
    position: relative;
}

/* Toggle button inside the sidebar */
.right-sidebar .sidebar-toggle {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Expand button stays on-screen when collapsed */
.right-sidebar .sidebar-expand {
    position: fixed; /* Fixed to stay on-screen */
    top: 20px;
    right: 20px; /* Positioned at the edge of the screen */
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: none; /* Hidden by default */
    z-index: 1001; /* Above sidebar */
}

/* Show expand button when collapsed */
.right-sidebar.collapsed .sidebar-toggle {
    display: none;
}

.right-sidebar.collapsed .sidebar-expand {
    display: block;
}

/* Media content adjustments */
.media-content {
    flex-grow: 1;
    padding: 20px;
    margin-left: 260px; /* 240px left sidebar + 20px gap */
    margin-right: 260px; /* 240px right sidebar + 20px gap */
    width: calc(100% - 520px); /* Total width minus sidebars + gaps */
    transition: margin-left 0.3s ease-in-out, margin-right 0.3s ease-in-out, width 0.3s ease-in-out;
    box-sizing: border-box;
}

.left-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px collapsed left sidebar + 20px gap */
    width: calc(100% - 320px); /* Adjust for right sidebar still open */
}

.right-sidebar.collapsed ~ .media-content {
    margin-right: 20px; /* Only the gap remains */
    width: calc(100% - 280px); /* Adjust for left sidebar still open */
}

.left-sidebar.collapsed + .right-sidebar.collapsed ~ .media-content {
    margin-left: 60px; /* 40px left + 20px gap */
    margin-right: 20px; /* Only the gap */
    width: calc(100% - 80px); /* Maximize width when both collapsed */
}

.right-sidebar.collapsed {
    transform: translateX(100%);
    width: 0;
    overflow: hidden;
    transition: transform 0.3s ease-in-out, width 0.3s ease-in-out;
}

.right-sidebar.collapsed ~ .media-content {
    margin-right: 0;
    width: calc(100% - 40px); /* Adjust based on left sidebar state */
}

.right-sidebar .sidebar-expand {
    position: fixed;
    top: 20px;
    right: 20px;
    display: none;
    z-index: 1001;
}

.right-sidebar.collapsed .sidebar-expand {
    display: block;
}
    .right-sidebar {
    right: 0;
    width: 250px; /* Default width */
    height: 100vh;
    position: fixed;
    top: 0;
    overflow-y: auto;
    background-color: #FFFFFF;
    transition: transform 0.3s ease-in-out, width 0.3s ease-in-out;
    z-index: 1000;
}

.right-sidebar.collapsed {
    transform: translateX(100%); /* Move sidebar off-screen to the right */
    width: 0; /* Hide the sidebar completely */
    overflow: hidden; /* Prevent content from being visible */
    padding: 0; /* Remove padding */
    margin: 0; /* Remove margin */
} .buttons-container {
            display: flex;
            gap: 1rem;
            padding: 1rem;
        }

        .dictionary-button {
            background-color: #f3f4f6;
            border: 2px solid transparent;
            border-radius: 12px;
            width: 42px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .dictionary-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            background-color: #e5e7eb;
            border-radius: 12px;
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.2s ease;
        }

        .dictionary-button:hover {
            border-color: #e5e7eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
                       0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .dictionary-button:active {
            transform: translateY(0);
        }

        .dictionary-button:hover::before {
            transform: translate(-50%, -50%) scale(1);
        }

        .dictionary-button svg {
            width: 24px;
            height: 24px;
            position: relative;
            z-index: 1;
            transition: all 0.2s ease;
        }

        .dictionary-button:hover svg {
            stroke: #2563eb;
            transform: scale(1.1);
        }

        .dictionary-button.active {
            background-color: #eff6ff;
            border-color: #2563eb;
        }

        .dictionary-button.active svg {
            stroke: #2563eb;
        }

        @media (max-width: 640px) {
            .dictionary-button {
                width: 38px;
                height: 38px;
            }

            .dictionary-button svg {
                width: 20px;
                height: 20px;
            }
        }
     .buttons-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px; /* Space between buttons */
    margin: 20px auto;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    max-width: calc(178vh * 0.7);
}

.button-group {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.icon-button,
.dictionary-button {
    width: 36px; /* Standard size for all buttons */
    height: 36px;
    padding: 8px;
    border-radius: 8px;
    background-color: white;
    border: 2px solid #e0e0e0;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.icon-button:hover,
.dictionary-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-color: #007BFF;
}

.icon-button:active,
.dictionary-button:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.icon-button img,
.dictionary-button svg {
    width: 20px; /* Standard size for icons */
    height: 20px;
    transition: all 0.3s ease;
}

.icon-button:hover img,
.dictionary-button:hover svg {
    filter: brightness(0) saturate(100%) invert(40%) sepia(100%) saturate(2000%) hue-rotate(200deg) brightness(90%) contrast(90%);
}

.dictionary-button.active svg {
    stroke: #007BFF; /* Active state for dictionary button */
}

.tooltip-text {
    visibility: hidden;
    width: 140px;
    background-color: #333;
    color: white;
    text-align: center;
    border-radius: 6px;
    padding: 8px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s, visibility 0.3s;
    font-size: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.button-group:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}
/* Left Sidebar Toggle Button Styling */
.left-sidebar .sidebar-toggle,
.left-sidebar .sidebar-expand {
    position: absolute;
    bottom: 20px; /* Consistent bottom spacing */
    left: 10px; /* Positioned at the left edge with padding */
    /* Alternative: Bottom-right corner */
    /* right: 10px; left: auto; */
    width: 40px; /* Larger for clickability */
    height: 40px;
    background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%); /* Subtle gradient */
    border: 2px solid #e0e0e0; /* Consistent border */
    border-radius: 50%; /* Circular */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease; /* Smooth transitions */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow */
    z-index: 1002; /* Above other content */
}

/* SVG Icon Styling */
.left-sidebar .sidebar-toggle svg,
.left-sidebar .sidebar-expand svg {
    width: 20px; /* Consistent icon size */
    height: 20px;
    stroke: #6b7280; /* Neutral gray */
    transition: all 0.3s ease;
}

/* Hover Effect */
.left-sidebar .sidebar-toggle:hover,
.left-sidebar .sidebar-expand:hover {
    background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); /* Lighter gradient */
    border-color: #007BFF; /* Blue border */
    transform: translateY(-2px); /* Slight lift */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15); /* Enhanced shadow */
}

.left-sidebar .sidebar-toggle:hover svg,
.left-sidebar .sidebar-expand:hover svg {
    stroke: #007BFF; /* Blue icon on hover */
}

/* Active (Pressed) State */
.left-sidebar .sidebar-toggle:active,
.left-sidebar .sidebar-expand:active {
    transform: scale(0.95); /* Slight scale down */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); /* Reduced shadow */
}

/* Visibility Control */
.left-sidebar .sidebar-toggle {
    display: block; /* Visible when expanded */
}

.left-sidebar .sidebar-expand {
    display: none; /* Hidden when expanded */
}

.left-sidebar.collapsed .sidebar-toggle {
    display: none; /* Hidden when collapsed */
}

.left-sidebar.collapsed .sidebar-expand {
    display: block; /* Visible when collapsed */
}

/* Ensure button stays in place in collapsed state */
.left-sidebar.collapsed .sidebar-expand {
    left: 10px; /* Same left positioning */
    /* Alternative: Bottom-right corner */
    /* right: 10px; left: auto; */
}

</style>
</head>


<body class="subplayer-page">

<div class="dashboard">
 <aside class="sidebar left-sidebar">
    {% include 'accounts/sidebar.html' %}
 <button class="sidebar-toggle" onclick="toggleLeftSidebar('collapse')">
    <div class="toggle-button-inner">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 18l-6-6 6-6"/>
        </svg>
    </div>
</button>
<button class="sidebar-expand" onclick="toggleLeftSidebar('expand')" style="display: none;">
    <div class="toggle-button-inner">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 6l6 6-6 6"/>
        </svg>
    </div>
</button>
</aside>

<aside class="sidebar right-sidebar">
    <div class="sidebar-header">
        <div class="xp-container">
            <div class="btn btn-purple btn-sm mb-0 d-flex align-items-center compact-btn" id="unique-xp-display">
                <div class="unique-xp-circle d-flex align-items-center justify-content-center me-2">XP</div>
                <span id="unique-xp-points">{{ total_points }}</span>
            </div>
        </div>
    </div>

<!-- rest of the sidebar content -->
<div class="highlight-list-container">

<ul id="highlight-list">

{% for highlight in highlights %}

<li class="highlight-item">

<div class="highlight-container">

<a href="#"

data-start-time="{{ highlight.start_time }}"

data-end-time="{{ highlight.end_time }}"

data-frame-index="{{ highlight.frame_index }}"

data-start-sentence-index="{{ highlight.start_sentence_index }}"

data-start-index="{{ highlight.start_index }}">

{{ highlight.highlighted_text }}

</a>

<img src="{% static 'subplayer/trash.png' %}" alt="Delete" class="delete-highlight" data-highlight-id="{{ highlight.id }}">

</div>

</li>

{% empty %}

<li id="no-highlights">No highlights found.</li>

{% endfor %}

</ul>

</div>

<div class="bottom-buttons">

<div class="button-xp-container">

<button id="play-all-btn" class="play-all-button">Play All Highlights</button>

</div>



</div>

</aside>




<div class="media-content">
    <audio id="audiofile" controls="controls" type="audio/mp3"></audio>
    <div class="video-container">
        <div id="player"></div>
    </div>
    <div class="subtitles-container" id="subtitles"></div>
    <div class="buttons-container">
    <!-- Status Button -->
    <div class="button-group">
        <button class="icon-button" id="status-icon">
            <img src="{% static 'subplayer/status.png' %}" alt="Set Status">
        </button>
        <span class="tooltip-text" id="status-tooltip">Set Status</span>
    </div>

    <!-- Loop Button -->
    <div class="button-group">
        <button class="icon-button" id="loop-icon">
            <img src="{% static 'subplayer/loopoff.png' %}" alt="Loop Off">
        </button>
        <span class="tooltip-text">Loop Mode: Select Text, Turn on Loop Mode (CMD Key)</span>
    </div>

    <!-- Highlight Button -->
    <div class="button-group">
        <button class="icon-button" id="highlight-icon">
            <img src="{% static 'subplayer/black-high.png' %}" alt="Highlighter">
        </button>
        <span class="tooltip-text">Highlight Mode: Select Text Then Click Shift</span>
    </div>

    <!-- Dictionary Button -->
    <div class="button-group">
        <button id="toggleDictionary" class="dictionary-button" onclick="toggleDictionary()">
            <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <defs>
                        <style>.a{fill:none;stroke:#000000;stroke-linecap:round;stroke-linejoin:round;}</style>
                    </defs>
                    <path class="a" d="M12.73,4.5H10.4a2,2,0,0,0-2,2v35a2,2,0,0,0,2,2h2.33"></path>
                    <path class="a" d="M12.73,4.5v39H37.6a2,2,0,0,0,2-2V6.5a2,2,0,0,0-2-2Z"></path>
                    <circle class="a" cx="28.1947" cy="22.6705" r="6.3286"></circle>
                    <line class="a" x1="23.7228" y1="27.1424" x2="17.6714" y2="33.1939"></line>
                </g>
            </svg>
        </button>
        <span class="tooltip-text">Dictionary</span>
    </div>

    <!-- Toggle Sidebar Button -->
    <div class="button-group">
        <button class="icon-button" onclick="toggleSidebar()">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <rect width="48" height="48" fill="white" fill-opacity="0.01"></rect>
                    <path d="M16 40H6C4.89543 40 4 39.1046 4 38V10C4 8.89543 4.89543 8 6 8H42C43.1046 8 44 8.89543 44 10V16" stroke="#000000" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                    <rect x="24" y="24" width="20" height="16" rx="2" fill="#2F88FF" stroke="#000000" stroke-width="4" stroke-linejoin="round"></rect>
                </g>
            </svg>
        </button>
        <span class="tooltip-text">Full Screen</span>
    </div>
</div>

    <div id="viewed-media-container"></div>
    <div id="highlight-display"></div>
</div>
<div id="media-status" data-status="{{ media_status }}"></div>


<script>
    let dictionaryEnabled = false; // Track if the dictionary is enabled

    var media = JSON.parse('{{ media_json|escapejs }}');
    var mediaId = media.media_id;
    var test2 = media.url;
    console.log("location" + test2);
    const mediaType = media.media_type;
    const audioPlayer = document.getElementById('audiofile');
    var userId = "{{ request.user.id }}";
    var profileId = "{{ request.user.profile.id }}";

    if (mediaType === 'audio') {
        audioPlayer.src = "{% static 'subplayer/audio/' %}" + media.media_id + ".mp3";
    } else {
        console.log("23434");
        document.getElementById('audiofile').style.display = 'none';
    }

    // Setup Highlight Links
    const highlights = document.querySelectorAll('#highlight-list a');
    highlights.forEach(highlight => {
        highlight.addEventListener('click', function(e) {
            e.preventDefault();
            const startTime = parseFloat(this.getAttribute('data-start-time'));
            if (player && !isNaN(startTime)) {
                player.seekTo(startTime, true);
            }
        });
    });

    function setupHighlightLinks() {
        const highlights = document.querySelectorAll('#highlight-list a');
        highlights.forEach(highlight => {
            highlight.addEventListener('click', function(e) {
                e.preventDefault();
                const startTime = parseFloat(this.getAttribute('data-start-time'));
                if (player && !isNaN(startTime)) {
                    player.seekTo(startTime, true);
                }
            });
        });
    }

    setupHighlightLinks();

function toggleSidebar() {
    const leftSidebar = document.querySelector('.left-sidebar');
    const rightSidebar = document.querySelector('.right-sidebar');
    const mediaContent = document.querySelector('.media-content');

    // Toggle both sidebars
    leftSidebar.classList.toggle('collapsed');
    rightSidebar.classList.toggle('collapsed');

    // Update the media content margins
    if (leftSidebar.classList.contains('collapsed')) {
        mediaContent.style.marginLeft = '40px';
    } else {
        mediaContent.style.marginLeft = '240px';
    }
    if (rightSidebar.classList.contains('collapsed')) {
        mediaContent.style.marginRight = '0';
    } else {
        mediaContent.style.marginRight = '250px';
    }

    // Update toggle buttons visibility
    const leftCollapseButton = document.querySelector('.left-sidebar .sidebar-toggle');
    const leftExpandButton = document.querySelector('.left-sidebar .sidebar-expand');
    if (leftSidebar.classList.contains('collapsed')) {
        leftCollapseButton.style.display = 'none';
        leftExpandButton.style.display = 'flex';
    } else {
        leftCollapseButton.style.display = 'flex';
        leftExpandButton.style.display = 'none';
    }

    // Save sidebars state
    localStorage.setItem('bothSidebars', leftSidebar.classList.contains('collapsed') ? 'collapsed' : 'expanded');
}

// Option to restore state on page load for both sidebars
document.addEventListener('DOMContentLoaded', function() {
    const bothSidebarsState = localStorage.getItem('bothSidebars');
    if (bothSidebarsState === 'collapsed') {
        toggleSidebar(); // This will toggle both sidebars to collapsed state
    }
});

// Keep the separate toggle for the left sidebar if you want individual control
function toggleLeftSidebar(action) {
    const leftSidebar = document.querySelector('.left-sidebar');
    const collapseButton = document.querySelector('.left-sidebar .sidebar-toggle');
    const expandButton = document.querySelector('.left-sidebar .sidebar-expand');
    const mediaContent = document.querySelector('.media-content');

    if (action === 'collapse') {
        leftSidebar.classList.add('collapsed');
        collapseButton.style.display = 'none';
        expandButton.style.display = 'block';
        mediaContent.style.marginLeft = '40px';
    } else if (action === 'expand') {
        leftSidebar.classList.remove('collapsed');
        collapseButton.style.display = 'block';
        expandButton.style.display = 'none';
        mediaContent.style.marginLeft = '240px';
    }

    // Save the state if needed
    localStorage.setItem('leftSidebar', leftSidebar.classList.contains('collapsed') ? 'collapsed' : 'expanded');
}
    document.getElementById('play-all-btn').addEventListener('click', playAllHighlights);

    async function playAllHighlights() {
        const highlights = document.querySelectorAll('#highlight-list a');
        let currentHighlightIndex = 0;
        await playHighlights(currentHighlightIndex, highlights);
    }

    async function playHighlights(currentHighlightIndex, highlights) {
        if (currentHighlightIndex < highlights.length) {
            const highlight = highlights[currentHighlightIndex];
            const startTime = parseFloat(highlight.getAttribute('data-start-time'));
            const endTime = parseFloat(highlight.getAttribute('data-end-time'));

            if (!isNaN(startTime) && !isNaN(endTime)) {
                await seekAndPlay(startTime);
                updateActiveHighlight(highlight);

                const highlightDuration = (endTime - startTime) * 1000;
                await new Promise(resolve => setTimeout(resolve, highlightDuration));

                currentHighlightIndex++;
                playHighlights(currentHighlightIndex, highlights);
            }
        } else {
            console.log('All highlights have been played.');
            player.pauseVideo();
        }
    }

    async function seekAndPlay(startTime) {
        player.seekTo(startTime, true);
        await new Promise(resolve => setTimeout(resolve, 500)); // Wait for 500ms to ensure seeking is complete
        player.playVideo();
    }

    function updateActiveHighlight(activeElement) {
        document.querySelectorAll('#highlight-list a').forEach(highlight => {
            highlight.classList.remove('played-highlight');
            highlight.classList.remove('active-highlight');
        });
        activeElement.classList.add('played-highlight');
        activeElement.classList.add('active-highlight');
    }

    function removeHighlightActiveStates() {
        document.querySelectorAll('#highlight-list a').forEach(highlight => {
            highlight.classList.remove('played-highlight');
        });
    }

    async function deleteHighlight(highlightId) {
        try {
            const response = await fetch(`/api/user/delete_highlight/${highlightId}/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrftoken2
                },
                body: JSON.stringify({ highlight_id: highlightId }),
            });

            if (response.ok) {
                console.log("Highlight deleted successfully!");
                await fetchHighlights(mediaId);
                createSubtitles();
            } else {
                console.error('Failed to delete highlight:', await response.text());
            }
        } catch (error) {
            console.error('Error during delete highlight:', error);
        }
    }

    function setupHighlightDeletion() {
        const deleteButtons = document.querySelectorAll('.delete-highlight');
        deleteButtons.forEach(button => {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                const highlightId = this.getAttribute('data-highlight-id');
                deleteHighlight(highlightId).then(() => {
                    this.closest('li').remove();
                });
            });
        });
    }

    function toggleHighlightMode() {
        document.addEventListener('keydown', function(event) {
            if (event.key === "Shift") {
                document.getElementById('highlight-icon').src = '{% static "subplayer/yellow-high.png" %}';
            }
        });

        document.addEventListener('keyup', function(event) {
            if (event.key === "Shift") {
                document.getElementById('highlight-icon').src = '{% static "subplayer/black-high.png" %}';
            }
        });
    }

    function initializeStatusUI() {
        console.log('Initializing status UI');
        const mediaStatusElement = document.getElementById('media-status');
        const initialStatus = mediaStatusElement.getAttribute('data-status');
        console.log('Initial status:', initialStatus);
        updateSingleStatusIcon(initialStatus);
    }

    function attachSingleStatusIconEventListener() {
        const statusIcon = document.getElementById('status-icon');
        statusIcon.addEventListener('click', function() {
            let newStatus;
            switch (this.dataset.status) {
                case 'in_progress':
                    newStatus = 'completed';
                    break;
                case 'completed':
                    newStatus = 'set-status';
                    break;
                case 'set-status':
                default:
                    newStatus = 'in_progress';
                    break;
            }
            toggleStatus(newStatus);
        });
    }

    async function toggleStatus(newStatus) {
        console.log("Toggle status called:", newStatus);
        const mediaId = '{{ media.media_id }}';
        const currentTime = player.getCurrentTime();
        currentStatus = newStatus;
        if (currentStatus === 'set-status') {
            lastUpdateTime = 0;
        }
        try {
            let url = `/media/update_status/${mediaId}/${newStatus}/`;
            let data = { status: newStatus, current_time: currentTime };
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCookie('csrftoken'),
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();
            console.log("Response received from updateMediaStatus:" + newStatus, result);

            if (result && result.status === 'success') {
                updateSingleStatusIcon(newStatus);
            } else {
                console.error('Failed to update status. Response:', result);
            }
        } catch (error) {
            console.error('Error updating media status:', error);
        }
    }

    function updateSingleStatusIcon(status) {
        console.log("updatedstatusicon")
        const statusIcon = document.getElementById('status-icon');
        const statusTooltip = document.getElementById('status-tooltip');

        switch (status) {
            case 'in_progress':
                statusIcon.src = '{% static "subplayer/in-prog.png" %}';
                statusTooltip.textContent = 'In Progress';
                break;
            case 'completed':
                statusIcon.src = '{% static "subplayer/complete-check.png" %}';
                statusTooltip.textContent = 'Completed';
                break;
            default:
                statusIcon.src = '{% static "subplayer/status.png" %}';
                statusTooltip.textContent = 'Set Status';
                break;
        }
        statusIcon.dataset.status = status;
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    document.addEventListener('DOMContentLoaded', function() {
        const highlightList = document.getElementById('highlight-list');

        highlightList.addEventListener('click', function(event) {
            let deleteBtn = event.target.closest('.delete-highlight');
            if (deleteBtn) {
                event.preventDefault();
                const highlightId = deleteBtn.getAttribute('data-highlight-id');
                deleteHighlight(highlightId).then(() => {
                    deleteBtn.closest('li').remove();
                    checkHighlightExistence();
                });
            }
        });

        setupHighlightLinks();
        toggleHighlightMode();
        initializeStatusUI();
        attachSingleStatusIconEventListener();
    });

    async function deleteHighlight(highlightId) {
        try {
            const response = await fetch(`/api/user/delete_highlight/${highlightId}/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrftoken2
                },
                body: JSON.stringify({ highlight_id: highlightId }),
            });

            if (response.ok) {
                console.log("Highlight deleted successfully!");
                await fetchHighlights(mediaId);
                createSubtitles();
            } else {
                console.error('Failed to delete highlight:', await response.text());
            }
        } catch (error) {
            console.error('Error during delete highlight:', error);
        }
    }

    function toggleDictionary() {
        const dictionaryButton = document.getElementById('toggleDictionary');
        dictionaryButton.classList.toggle('active');
        dictionaryEnabled = dictionaryButton.classList.contains('active'); // Update dictionaryEnabled

        if (!dictionaryEnabled) {
            hidePopup(); // Hide the popup if the dictionary is disabled
        }
    }
function toggleLeftSidebar(action) {
    const leftSidebar = document.querySelector('.left-sidebar');
    const collapseButton = document.querySelector('.left-sidebar .sidebar-toggle');
    const expandButton = document.querySelector('.left-sidebar .sidebar-expand');
    const mediaContent = document.querySelector('.media-content');
    const rightSidebar = document.querySelector('.right-sidebar');

    if (action === 'collapse') {
        leftSidebar.classList.add('collapsed');
        collapseButton.style.display = 'none';
        expandButton.style.display = 'block';
        mediaContent.style.marginLeft = '60px'; // 40px sidebar + 20px gap
        // Adjust width based on right sidebar state
        mediaContent.style.width = rightSidebar.classList.contains('collapsed')
            ? 'calc(100% - 80px)' // Both collapsed: 40px left + 20px + 0px right + 20px
            : 'calc(100% - 320px)'; // Left collapsed: 40px + 20px + 240px + 20px
    } else if (action === 'expand') {
        leftSidebar.classList.remove('collapsed');
        collapseButton.style.display = 'block';
        expandButton.style.display = 'none';
        mediaContent.style.marginLeft = '260px'; // 240px sidebar + 20px gap
        // Restore width based on right sidebar state
        mediaContent.style.width = rightSidebar.classList.contains('collapsed')
            ? 'calc(100% - 280px)' // Right collapsed: 240px + 20px + 0px + 20px
            : 'calc(100% - 520px)'; // Both expanded: 240px + 20px + 240px + 20px
    }

    // Ensure centering
    mediaContent.style.marginLeft = mediaContent.style.marginLeft;
    mediaContent.style.marginRight = rightSidebar.classList.contains('collapsed') ? '20px' : '260px';

    // Save the state
    localStorage.setItem('leftSidebar', leftSidebar.classList.contains('collapsed') ? 'collapsed' : 'expanded');

    // Force video player to resize
    const playerIframe = document.querySelector('#player iframe');
    if (playerIframe) {
        playerIframe.style.width = '100%';
        playerIframe.style.height = '100%';
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const leftSidebar = document.querySelector('.left-sidebar');
    const rightSidebar = document.querySelector('.right-sidebar');
    const mediaContent = document.querySelector('.media-content');

    const leftSidebarState = localStorage.getItem('leftSidebar');
    const rightSidebarState = localStorage.getItem('rightSidebar');

    // Left sidebar state
    if (leftSidebarState === 'collapsed') {
        leftSidebar.classList.add('collapsed');
        mediaContent.style.marginLeft = '60px'; // 40px + 20px gap
        document.querySelector('.left-sidebar .sidebar-toggle').style.display = 'none';
        document.querySelector('.left-sidebar .sidebar-expand').style.display = 'block';
    } else {
        mediaContent.style.marginLeft = '260px'; // 240px + 20px gap
    }

    // Right sidebar state
    if (rightSidebarState === 'collapsed') {
        rightSidebar.classList.add('collapsed');
        mediaContent.style.marginRight = '20px'; // Just the 20px gap
    } else {
        mediaContent.style.marginRight = '260px'; // 240px + 20px gap
    }

    // Set initial width based on sidebar states
    if (leftSidebarState === 'collapsed' && rightSidebarState === 'collapsed') {
        mediaContent.style.width = 'calc(100% - 80px)';
    } else if (leftSidebarState === 'collapsed') {
        mediaContent.style.width = 'calc(100% - 320px)';
    } else if (rightSidebarState === 'collapsed') {
        mediaContent.style.width = 'calc(100% - 280px)';
    } else {
        mediaContent.style.width = 'calc(100% - 520px)';
    }

    // Force video player resize on load
    const playerIframe = document.querySelector('#player iframe');
    if (playerIframe) {
        playerIframe.style.width = '100%';
        playerIframe.style.height = '100%';
    }
});
function toggleSidebar() {
    const leftSidebar = document.querySelector('.left-sidebar');
    const rightSidebar = document.querySelector('.right-sidebar');
    const mediaContent = document.querySelector('.media-content');

    // Toggle both sidebars
    leftSidebar.classList.toggle('collapsed');
    rightSidebar.classList.toggle('collapsed');

    // Update the media content margins
    if (leftSidebar.classList.contains('collapsed')) {
        mediaContent.style.marginLeft = '40px';
    } else {
        mediaContent.style.marginLeft = '240px';
    }
    if (rightSidebar.classList.contains('collapsed')) {
        mediaContent.style.marginRight = '0';
    } else {
        mediaContent.style.marginRight = '250px';
    }

    // Update toggle buttons visibility
    const leftCollapseButton = document.querySelector('.left-sidebar .sidebar-toggle');
    const leftExpandButton = document.querySelector('.left-sidebar .sidebar-expand');
    if (leftSidebar.classList.contains('collapsed')) {
        leftCollapseButton.style.display = 'none';
        leftExpandButton.style.display = 'flex';
    } else {
        leftCollapseButton.style.display = 'flex';
        leftExpandButton.style.display = 'none';
    }

    // Save sidebars state
    localStorage.setItem('bothSidebars', leftSidebar.classList.contains('collapsed') ? 'collapsed' : 'expanded');
}

document.addEventListener('DOMContentLoaded', function() {
    const bothSidebarsState = localStorage.getItem('bothSidebars');
    if (bothSidebarsState === 'collapsed') {
        toggleSidebar(); // This will toggle both sidebars to collapsed state
    }
});
</script>

{% if media.media_type == 'audio' %}
    {% include 'subtitles.html' with media=media %}
{% else %}
    <script src="{% static 'subplayer/js/subtitles_video.js' %}"></script>
    <script src="{% static 'subplayer/js/dc.js' %}"></script>
{% endif %}
<script>var DICT_BASE_PATH = "{% static 'subplayer/pop_dic/' %}";</script>
</body>

</html>

{% endblock %}